// {{ ansible_managed }}
{# Allowed Origins #}
{% if unattended_upgrades_allowed_origins is defined and unattended_upgrades_allowed_origins %}
Unattended-Upgrade::Allowed-Origins {
{%   for line in unattended_upgrades_allowed_origins %}
    "{{ line }}";
{%   endfor %}
};
{% endif %}
{# Package Blacklist #}
{% if unattended_upgrades_package_blacklist is defined and unattended_upgrades_package_blacklist %}
Unattended-Upgrade::Package-Blacklist {
{%   for line in unattended_upgrades_package_blacklist %}
    "{{ line }}";
{%   endfor %}
};
{% endif %}
{# Development Release #}
{% if unattended_upgrades_devrelease is defined and unattended_upgrades_devrelease %}
Unattended-Upgrade::DevRelease "{{ unattended_upgrades_devrelease }}";
{% endif %}
{# Auto Fix Interrupted DPKG #}
Unattended-Upgrade::AutoFixInterruptedDpkg "{{ unattended_upgrades_autofix_interrupt_dpkg | ternary('true', 'false') }}";
{# Minimal Steps #}
Unattended-Upgrade::MinimalSteps "{{ unattended_upgrades_minimal_steps | ternary('true', 'false') }}";
{# Install On Shutdown #}
Unattended-Upgrade::InstallOnShutdown "{{ unattended_upgrades_install_on_shutdown | ternary('true', 'false') }}";
{# Mail Configuration #}
{% if unattended_upgrades_mailto is defined and unattended_upgrades_mailto %}
Unattended-Upgrade::Mail "{{ unattended_upgrades_mailto }}";
{% endif %}
{# Mail Report #}
{% if unattended_upgrades_mailreport is defined and unattended_upgrades_mailreport %}
Unattended-Upgrade::MailReport "{{ unattended_upgrades_mailreport }}";
{% endif %}
{# Remove Unused Kernel Packages #}
Unattended-Upgrade::Remove-Unused-Kernel-Packages "{{ unattended_upgrades_remove_unused_kernel | ternary('true', 'false') }}";
{# Remove New Unused Dependencies #}
Unattended-Upgrade::Remove-New-Unused-Dependencies "{{ unattended_upgrades_remove_new_unused_dependencies | ternary('true', 'false') }}";
{# Remove Unused Dependencies #}
Unattended-Upgrade::Remove-Unused-Dependencies "{{ unattended_upgrades_remove_unused_dependencies | ternary('true', 'false') }}";
{# Automatic Reboot Configuration #}
Unattended-Upgrade::Automatic-Reboot "{{ unattended_upgrades_automatic_reboot | ternary('true', 'false') }}";
{% if unattended_upgrades_automatic_reboot %}
Unattended-Upgrade::Automatic-Reboot-WithUsers "{{ unattended_upgrades_automatic_reboot_withuser | ternary('true', 'false') }}";
Unattended-Upgrade::Automatic-Reboot-Time "{{ unattended_upgrades_automatic_reboot_time }}";
{% endif %}
{# Download Limit #}
{% if unattended_upgrades_download_limit %}
Acquire::http::Dl-Limit "{{ unattended_upgrades_download_limit_value }}";
{% endif %}
{# Syslog Configuration #}
Unattended-Upgrade::SyslogEnable "{{ unattended_upgrades_syslog_enable | ternary('true', 'false') }}";
{% if unattended_upgrades_syslog_facility is defined and unattended_upgrades_syslog_facility %}
Unattended-Upgrade::SyslogFacility "{{ unattended_upgrades_syslog_facility }}";
{% endif %}
{# Power and Connection Settings #}
Unattended-Upgrade::OnlyOnACPower "{{ unattended_upgrades_only_acpower | ternary('true', 'false') }}";
Unattended-Upgrade::Skip-Updates-On-Metered-Connections "{{ unattended_upgrades_skip_nonmeterd_connection | ternary('true', 'false') }}";
{# Logging Settings #}
Unattended-Upgrade::Verbose "{{ unattended_upgrades_verbose | ternary('true', 'false') }}";
Unattended-Upgrade::Debug "{{ unattended_upgrades_debug | ternary('true', 'false') }}";
{# Allow Downgrade #}
Unattended-Upgrade::Allow-downgrade "{{ unattended_upgrades_allow_downgrade | ternary('true', 'false') }}";
{# Additional custom configurations #}
{% if unattended_upgrades_append_config is defined and unattended_upgrades_append_config %}
{%   for item in unattended_upgrades_append_config %}
{%     if item.name == '50unattended-upgrades' and item.config is defined and item.config %}
{{ item.config }}
{%     endif %}
{%   endfor %}
{% endif %}
